webpackJsonp([1],{"/UEY":function(t,e){},"0cYv":function(t,e){},"9sG2":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),s=a("exGp"),o=a.n(s),l=a("EPBf"),i=a("vMbH"),u=a("//Fk"),c=a.n(u);function d(t,e){return new c.a(function(a,r){setTimeout(function(){return a(t())},e)})}var g=a("nEeT"),m={name:"BugInfo",data:function(){var t=this,e=/^(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])$/,a=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/;return{form:{address:"",port:"",url:"",IpAllow:!1,PortAllow:!1,urlAllow:!1},rules:{address:[{required:!0,message:"地址不可为空",trigger:"blur",allow:!1},{validator:function(a,r,n){e.test(r)?(t.form.IpAllow=!0,n()):n(new Error("地址格式异常"))},trigger:"blur"}],port:[{required:!0,message:"端口不可为空",trigger:"blur",allow:!1},{validator:function(e,a,r){var n=parseInt(a);window.isNaN(n)?r(new Error("仅支持数字格式")):n<=0||n>65535?r(new Error("超出端口范围")):(t.form.PortAllow=!0,r())},trigger:"blur"}],url:[{required:!0,message:"url格式不正确",trigger:"blur",allow:!1},{validator:function(e,r,n){a.test(r)?(t.form.urlAllow=!0,n()):n(new Error("url地址格式异常"))},trigger:"blur"}]}}},methods:{onSubmit:function(){var t=this;if(this.form.IpAllow&&this.form.PortAllow&&this.form.urlAllow){var e=new Object;e.address=this.form.address,e.port=this.form.port,e.url=this.form.url,Object(i.b)(e).then(function(e){200!==e.data.code?t.$message.error(e.data.msg):(t.$message.success(e.data.msg),t.$router.push("/main"))}).catch(function(e){t.$message.error("内部服务异常，请检查服务端口是否正常云心")})}else this.$message.error("参数异常：检查输入参数")}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fieldset",[a("legend",[t._v("调试信息")]),t._v(" "),a("el-form",{attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入debug地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"端口",prop:"port"}},[a("el-input",{attrs:{placeholder:"请输入debug端口"},model:{value:t.form.port,callback:function(e){t.$set(t.form,"port",e)},expression:"form.port"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"目标网站",prop:"url"}},[a("el-input",{attrs:{placeholder:"目标网站可访问的url(全路径)"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:18}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("修改")])],1)],1)],1)],1)])},staticRenderFns:[]};var f={name:"MainInfo",inject:["reload"],data:function(){return{ip:"127.0.0.1",port:"5005",url:"",statusFlag:!1,show:!1,analyse:!1,analyLog:"",targets:[],dialogVisible:!1}},methods:{handleSelect:function(t,e){this.$router.push("/main/"+t)},connectdebug:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.analyLog="连接中....",t.analyse=!0,Object(l.c)().then(function(e){200===e.data.code||300===e.data.code?(t.statusFlag=!0,t.analyLog="分析中...",Object(l.e)().then(function(e){t.waitAnalyseComplete()})):(t.$message.error(e.data.msg),t.analyse=!1)}).catch(function(e){t.$message.error("内部服务异常，请检查服务端口")});case 3:case"end":return e.stop()}},e,t)}))()},waitAnalyseComplete:function(){var t=this;return o()(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=!1;case 1:if(a){e.next=8;break}return e.next=4,d(l.a,1e3);case 4:e.sent.data.msg&&(t.setTargetList(),a=!0,t.analyse=!1),e.next=1;break;case 8:case"end":return e.stop()}},e,t)}))()},setTargetList:function(){var t=this;Object(g.d)().then(function(e){var a=[];e.data.msg.spring&&a.push("spring"),e.data.msg.struts&&a.push("struts"),e.data.msg.tomcat&&a.push("tomcat"),e.data.msg.jetty&&a.push("jetty"),e.data.msg.jersey&&a.push("jersey"),t.targets=a})},cleanData:function(){Object(l.b)(),this.$router.push("/main"),this.reload()},disConnectDebug:function(){var t=this;Object(l.f)().then(function(e){t.reload()})},settingConnectArg:function(){this.statusFlag?this.$message.error("设置前需要断开连接"):this.dialogVisible=!0},exportData:function(){0!==this.targets.length?Object(g.c)().then(function(t){var e=new Blob([t.data]),a=window.URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download="output.xls",r.click(),window.URL.revokeObjectURL(a)}):this.$message.error("无数据!")},emptybutton:function(){this.$message.warning("计划开放")}},created:function(){var t=this;Object(i.a)().then(function(e){200!==e.data.code?(t.$message.warning(e.data.msg),t.$router.push("/index")):(t.ip=e.data.msg.address,t.port=e.data.msg.port,t.url=e.data.msg.url,Object(g.a)().then(function(e){200===e.data.code&&t.setTargetList()}),t.show=!0)}),Object(l.d)().then(function(e){200===e.data.code?t.statusFlag=!0:t.statusFlag=!1})},components:{BugInfo:a("VU/8")(m,p,!1,function(t){a("/UEY")},"data-v-43d46e02",null).exports}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"root"},[t.show?a("div",[a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.analyse,expression:"analyse"}],attrs:{"element-loading-text":t.analyLog}},[a("el-header",{attrs:{height:""}},[a("el-col",{staticClass:"complex",attrs:{span:8}},[a("div",{staticClass:"ip_port"},[a("span",[t._v("ip: ")]),t._v(" "),a("el-tag",{attrs:{id:"ip"}},[t._v(t._s(this.ip))]),t._v(" "),a("span",[t._v("port: ")]),t._v(" "),a("el-tag",[t._v(t._s(this.port))])],1),t._v(" "),a("el-divider"),t._v(" "),a("div",{staticClass:"url"},[t._v("url:\n            "),a("el-tag",[t._v(t._s(this.url))])],1)],1),t._v(" "),a("el-col",{staticClass:"status",attrs:{span:4}},[t.statusFlag?a("div",[a("span",[t._v("status:"),a("el-tag",{attrs:{type:"success"}},[t._v("connected")])],1)]):a("div",[a("span",[t._v("status:"),a("el-tag",{attrs:{type:"danger"}},[t._v("unconnected")])],1)])]),t._v(" "),a("el-col",{staticClass:"button",attrs:{span:12}},[a("el-button",{attrs:{type:"primary"},on:{click:t.settingConnectArg}},[t._v("设置")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.emptybutton}},[t._v("未授权探测")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.connectdebug}},[t._v("连接与分析")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.disConnectDebug}},[t._v("断开连接")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.cleanData}},[t._v("置空")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.exportData}},[t._v("一键导出(xls)")])],1)],1),t._v(" "),a("el-main",[a("el-col",{attrs:{span:4}},t._l(t.targets,function(e){return a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"el-menu-vertical-demo"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:e}},[a("img",{attrs:{src:"../../static/"+e+".png"}}),t._v(t._s(e))])],1)}),1),t._v(" "),a("el-col",{attrs:{span:20}},[a("router-view")],1)],1)],1)],1):t._e(),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("bug-info")],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,v,!1,function(t){a("0cYv")},"data-v-3854022e",null);e.default=h.exports},EPBf:function(t,e,a){"use strict";e.c=function(){return Object(r.a)({url:"/mg/connect",method:"get"})},e.e=function(){return Object(r.a)({url:"/mg/run",method:"get"})},e.a=function(){return Object(r.a)({url:"/mg/analystatus",method:"get"})},e.b=function(){return Object(r.a)({url:"/mg/clean",method:"get"})},e.f=function(){return Object(r.a)({url:"/mg/stop",method:"get"})},e.d=function(){return Object(r.a)({url:"/mg/exist",method:"get"})};var r=a("vLgD")},vMbH:function(t,e,a){"use strict";e.b=function(t){return Object(r.a)({url:"/args/set",method:"post",data:t})},e.a=function(){return Object(r.a)({url:"/args/get",method:"get"})};var r=a("vLgD")}});
//# sourceMappingURL=1.218c68d6e6626ee7fdf9.js.map